{"version":3,"sources":["../../src/hooks/useGlobalOnClickOutside.ts"],"sourcesContent":["import type * as React from 'react';\nimport { isElement, useDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\nexport const useGlobalOnEventOutside = <\n  T extends React.RefObject<ElementType | null> | undefined | null,\n  ElementType extends Element = Element,\n>(\n  event: Extract<keyof DocumentEventMap, 'click' | 'mousedown'>,\n  callback: (event: MouseEvent) => void,\n  ...refs: T[]\n): void => {\n  const { document } = useDOM();\n  useIsomorphicLayoutEffect(() => {\n    const someRefNotNull = refs.some((ref) => ref && ref.current !== null);\n    if (!document || !someRefNotNull) {\n      return;\n    }\n    const handleClick = (event: MouseEvent) => {\n      const targetEl = event.target;\n      const someRefHasTargetEl =\n        isElement(targetEl) &&\n        refs.some((ref) => ref && ref.current && ref.current.contains(targetEl));\n      if (!someRefHasTargetEl) {\n        callback(event);\n      }\n    };\n    document.addEventListener(event, handleClick, {\n      passive: true,\n      capture: true,\n    });\n    return () => {\n      document.removeEventListener(event, handleClick, true);\n    };\n  }, [document, callback, ...refs]);\n};\n\n/**\n * Завязывается на document.\n *\n * @private\n */\nexport const useGlobalOnClickOutside = <\n  T extends React.RefObject<ElementType | null> | undefined | null,\n  ElementType extends Element = Element,\n>(\n  callback: (event: MouseEvent) => void,\n  ...refs: T[]\n): void => {\n  useGlobalOnEventOutside('click', callback, ...refs);\n};\n"],"names":["isElement","useDOM","useIsomorphicLayoutEffect","useGlobalOnEventOutside","event","callback","refs","document","someRefNotNull","some","ref","current","handleClick","targetEl","target","someRefHasTargetEl","contains","addEventListener","passive","capture","removeEventListener","useGlobalOnClickOutside"],"mappings":"AACA,SAASA,SAAS,EAAEC,MAAM,QAAQ,gBAAa;AAC/C,SAASC,yBAAyB,QAAQ,sCAAmC;AAE7E,OAAO,MAAMC,0BAA0B,CAIrCC,OACAC,UACA,GAAGC;IAEH,MAAM,EAAEC,QAAQ,EAAE,GAAGN;IACrBC,0BAA0B;QACxB,MAAMM,iBAAiBF,KAAKG,IAAI,CAAC,CAACC,MAAQA,OAAOA,IAAIC,OAAO,KAAK;QACjE,IAAI,CAACJ,YAAY,CAACC,gBAAgB;YAChC;QACF;QACA,MAAMI,cAAc,CAACR;YACnB,MAAMS,WAAWT,MAAMU,MAAM;YAC7B,MAAMC,qBACJf,UAAUa,aACVP,KAAKG,IAAI,CAAC,CAACC,MAAQA,OAAOA,IAAIC,OAAO,IAAID,IAAIC,OAAO,CAACK,QAAQ,CAACH;YAChE,IAAI,CAACE,oBAAoB;gBACvBV,SAASD;YACX;QACF;QACAG,SAASU,gBAAgB,CAACb,OAAOQ,aAAa;YAC5CM,SAAS;YACTC,SAAS;QACX;QACA,OAAO;YACLZ,SAASa,mBAAmB,CAAChB,OAAOQ,aAAa;QACnD;IACF,GAAG;QAACL;QAAUF;WAAaC;KAAK;AAClC,EAAE;AAEF;;;;CAIC,GACD,OAAO,MAAMe,0BAA0B,CAIrChB,UACA,GAAGC;IAEHH,wBAAwB,SAASE,aAAaC;AAChD,EAAE"}